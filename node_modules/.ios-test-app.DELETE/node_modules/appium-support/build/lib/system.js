'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _teen_process = require('teen_process');

var _os = require('os');

var _os2 = _interopRequireDefault(_os);

function isWindows() {
  return _os2['default'].type() === 'Windows_NT';
}

function isMac() {
  return _os2['default'].type() === 'Darwin';
}

function isLinux() {
  return !isWindows() && !isMac();
}

function isOSWin64() {
  return process.arch === 'x64' || process.env.hasOwnProperty('PROCESSOR_ARCHITEW6432');
}

function arch() {
  var _ref, stdout, is64;

  return _regeneratorRuntime.async(function arch$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        if (!(isLinux() || isMac())) {
          context$1$0.next = 8;
          break;
        }

        context$1$0.next = 3;
        return _regeneratorRuntime.awrap((0, _teen_process.exec)('uname', ['-m']));

      case 3:
        _ref = context$1$0.sent;
        stdout = _ref.stdout;
        return context$1$0.abrupt('return', stdout.trim() === 'i686' ? '32' : '64');

      case 8:
        if (!isWindows()) {
          context$1$0.next = 11;
          break;
        }

        is64 = this.isOSWin64();
        return context$1$0.abrupt('return', is64 ? '64' : '32');

      case 11:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
}

function macOsxVersion() {
  var stdout, _arr, _i, v;

  return _regeneratorRuntime.async(function macOsxVersion$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        stdout = undefined;
        context$1$0.prev = 1;
        context$1$0.next = 4;
        return _regeneratorRuntime.awrap((0, _teen_process.exec)('sw_vers', ['-productVersion']));

      case 4:
        stdout = context$1$0.sent.stdout;
        context$1$0.next = 10;
        break;

      case 7:
        context$1$0.prev = 7;
        context$1$0.t0 = context$1$0['catch'](1);
        throw new Error('Could not detect Mac OS X Version: ' + context$1$0.t0);

      case 10:
        _arr = ['10.8', '10.9', '10.10', '10.11'];
        _i = 0;

      case 12:
        if (!(_i < _arr.length)) {
          context$1$0.next = 19;
          break;
        }

        v = _arr[_i];

        if (!(stdout.indexOf(v) === 0)) {
          context$1$0.next = 16;
          break;
        }

        return context$1$0.abrupt('return', v);

      case 16:
        _i++;
        context$1$0.next = 12;
        break;

      case 19:
        throw new Error('Could not detect Mac OS X Version from sw_vers output: \'' + stdout + '\'');

      case 20:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this, [[1, 7]]);
}

exports.isWindows = isWindows;
exports.isMac = isMac;
exports.isLinux = isLinux;
exports.isOSWin64 = isOSWin64;
exports.arch = arch;
exports.macOsxVersion = macOsxVersion;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9zeXN0ZW0uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs0QkFBcUIsY0FBYzs7a0JBQ3BCLElBQUk7Ozs7QUFFbkIsU0FBUyxTQUFTLEdBQUk7QUFDcEIsU0FBTyxnQkFBRyxJQUFJLEVBQUUsS0FBSyxZQUFZLENBQUM7Q0FDbkM7O0FBRUQsU0FBUyxLQUFLLEdBQUk7QUFDaEIsU0FBTyxnQkFBRyxJQUFJLEVBQUUsS0FBSyxRQUFRLENBQUM7Q0FDL0I7O0FBRUQsU0FBUyxPQUFPLEdBQUk7QUFDbEIsU0FBTyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7Q0FDakM7O0FBRUQsU0FBUyxTQUFTLEdBQUc7QUFDbkIsU0FBTyxPQUFPLENBQUMsSUFBSSxLQUFLLEtBQUssSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0NBQ3ZGOztBQUVELFNBQWUsSUFBSTtZQUVWLE1BQU0sRUFHUCxJQUFJOzs7OztjQUpOLE9BQU8sRUFBRSxJQUFJLEtBQUssRUFBRSxDQUFBOzs7Ozs7eUNBQ0Qsd0JBQUssT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7Ozs7QUFBckMsY0FBTSxRQUFOLE1BQU07NENBQ0osTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLE1BQU0sR0FBRyxJQUFJLEdBQUcsSUFBSTs7O2FBQ3BDLFNBQVMsRUFBRTs7Ozs7QUFDaEIsWUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLEVBQUU7NENBQ3BCLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSTs7Ozs7OztDQUU1Qjs7QUFFRCxTQUFlLGFBQWE7TUFDdEIsTUFBTSxZQU1ELENBQUM7Ozs7O0FBTk4sY0FBTTs7O3lDQUVRLHdCQUFLLFNBQVMsRUFBRSxDQUFDLGlCQUFpQixDQUFDLENBQUM7OztBQUFwRCxjQUFNLG9CQUFnRCxNQUFNOzs7Ozs7O2NBRXRELElBQUksS0FBSyx3REFBNkM7OztlQUVoRCxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQzs7Ozs7Ozs7O0FBQXZDLFNBQUM7O2NBQ0osTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUE7Ozs7OzRDQUFXLENBQUM7Ozs7Ozs7O2NBRW5DLElBQUksS0FBSywrREFBNEQsTUFBTSxRQUFJOzs7Ozs7O0NBQ3RGOztRQUVRLFNBQVMsR0FBVCxTQUFTO1FBQUUsS0FBSyxHQUFMLEtBQUs7UUFBRSxPQUFPLEdBQVAsT0FBTztRQUFFLFNBQVMsR0FBVCxTQUFTO1FBQUUsSUFBSSxHQUFKLElBQUk7UUFBRSxhQUFhLEdBQWIsYUFBYSIsImZpbGUiOiJsaWIvc3lzdGVtLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhlYyB9IGZyb20gJ3RlZW5fcHJvY2Vzcyc7XG5pbXBvcnQgb3MgZnJvbSAnb3MnO1xuXG5mdW5jdGlvbiBpc1dpbmRvd3MgKCkge1xuICByZXR1cm4gb3MudHlwZSgpID09PSAnV2luZG93c19OVCc7XG59XG5cbmZ1bmN0aW9uIGlzTWFjICgpIHtcbiAgcmV0dXJuIG9zLnR5cGUoKSA9PT0gJ0Rhcndpbic7XG59XG5cbmZ1bmN0aW9uIGlzTGludXggKCkge1xuICByZXR1cm4gIWlzV2luZG93cygpICYmICFpc01hYygpO1xufVxuXG5mdW5jdGlvbiBpc09TV2luNjQoKSB7XG4gIHJldHVybiBwcm9jZXNzLmFyY2ggPT09ICd4NjQnIHx8IHByb2Nlc3MuZW52Lmhhc093blByb3BlcnR5KCdQUk9DRVNTT1JfQVJDSElURVc2NDMyJyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFyY2ggKCkge1xuICBpZiAoaXNMaW51eCgpIHx8IGlzTWFjKCkpIHtcbiAgICBsZXQge3N0ZG91dH0gPSBhd2FpdCBleGVjKCd1bmFtZScsIFsnLW0nXSk7XG4gICAgcmV0dXJuIHN0ZG91dC50cmltKCkgPT09ICdpNjg2JyA/ICczMicgOiAnNjQnO1xuICB9IGVsc2UgaWYgKGlzV2luZG93cygpKSB7XG4gICAgbGV0IGlzNjQgPSB0aGlzLmlzT1NXaW42NCgpO1xuICAgIHJldHVybiBpczY0ID8gJzY0JyA6ICczMic7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gbWFjT3N4VmVyc2lvbiAoKSB7XG4gIGxldCBzdGRvdXQ7XG4gIHRyeSB7XG4gICAgc3Rkb3V0ID0gKGF3YWl0IGV4ZWMoJ3N3X3ZlcnMnLCBbJy1wcm9kdWN0VmVyc2lvbiddKSkuc3Rkb3V0O1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBkZXRlY3QgTWFjIE9TIFggVmVyc2lvbjogJHtlcnJ9YCk7XG4gIH1cbiAgZm9yIChsZXQgdiBvZiBbJzEwLjgnLCAnMTAuOScsICcxMC4xMCcsICcxMC4xMSddKSB7XG4gICAgaWYgKHN0ZG91dC5pbmRleE9mKHYpID09PSAwKSB7IHJldHVybiB2OyB9XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZGV0ZWN0IE1hYyBPUyBYIFZlcnNpb24gZnJvbSBzd192ZXJzIG91dHB1dDogJyR7c3Rkb3V0fSdgKTtcbn1cblxuZXhwb3J0IHsgaXNXaW5kb3dzLCBpc01hYywgaXNMaW51eCwgaXNPU1dpbjY0LCBhcmNoLCBtYWNPc3hWZXJzaW9uIH07XG4iXX0=