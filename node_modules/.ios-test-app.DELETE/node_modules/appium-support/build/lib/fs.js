'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _getIterator = require('babel-runtime/core-js/get-iterator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _fs2 = require('fs');

var _fs3 = _interopRequireDefault(_fs2);

var _rimraf = require('rimraf');

var _rimraf2 = _interopRequireDefault(_rimraf);

var _md52 = require('md5');

var _md53 = _interopRequireDefault(_md52);

var _ncp = require('ncp');

var _ncp2 = _interopRequireDefault(_ncp);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _mv = require('mv');

var _mv2 = _interopRequireDefault(_mv);

var _which = require('which');

var _which2 = _interopRequireDefault(_which);

var _glob = require('glob');

var _glob2 = _interopRequireDefault(_glob);

var fs = {
  hasAccess: function hasAccess(path) {
    return _regeneratorRuntime.async(function hasAccess$(context$1$0) {
      while (1) switch (context$1$0.prev = context$1$0.next) {
        case 0:
          context$1$0.prev = 0;
          context$1$0.next = 3;
          return _regeneratorRuntime.awrap(this.access(path, fs.F_OK | fs.R_OK));

        case 3:
          context$1$0.next = 8;
          break;

        case 5:
          context$1$0.prev = 5;
          context$1$0.t0 = context$1$0['catch'](0);
          return context$1$0.abrupt('return', false);

        case 8:
          return context$1$0.abrupt('return', true);

        case 9:
        case 'end':
          return context$1$0.stop();
      }
    }, null, this, [[0, 5]]);
  },
  exists: function exists(path) {
    return this.hasAccess(path);
  },
  rimraf: _bluebird2['default'].promisify(_rimraf2['default']),
  mkdir: function mkdir(dirName) {
    var _mkdir;

    return _regeneratorRuntime.async(function mkdir$(context$1$0) {
      while (1) switch (context$1$0.prev = context$1$0.next) {
        case 0:
          _mkdir = _bluebird2['default'].promisify(_fs3['default'].mkdir);
          context$1$0.prev = 1;
          context$1$0.next = 4;
          return _regeneratorRuntime.awrap(_mkdir(dirName));

        case 4:
          context$1$0.next = 10;
          break;

        case 6:
          context$1$0.prev = 6;
          context$1$0.t0 = context$1$0['catch'](1);

          if (!(context$1$0.t0 && context$1$0.t0.code !== "EEXIST")) {
            context$1$0.next = 10;
            break;
          }

          throw context$1$0.t0;

        case 10:
        case 'end':
          return context$1$0.stop();
      }
    }, null, this, [[1, 6]]);
  },
  copyFile: _bluebird2['default'].promisify(_ncp2['default']),
  md5: function md5(filePath) {
    return _regeneratorRuntime.async(function md5$(context$1$0) {
      while (1) switch (context$1$0.prev = context$1$0.next) {
        case 0:
          context$1$0.next = 2;
          return _regeneratorRuntime.awrap(fs.readFile(filePath));

        case 2:
          context$1$0.t0 = context$1$0.sent;
          return context$1$0.abrupt('return', (0, _md53['default'])(context$1$0.t0));

        case 4:
        case 'end':
          return context$1$0.stop();
      }
    }, null, this);
  },
  mv: _bluebird2['default'].promisify(_mv2['default']),
  which: _bluebird2['default'].promisify(_which2['default']),
  glob: _bluebird2['default'].promisify(_glob2['default'])
};

var simples = ['open', 'close', 'access', 'readFile', 'writeFile', 'write', 'readlink', 'chmod', 'unlink', 'readdir', 'stat', 'rename', 'lstat'];

var _iteratorNormalCompletion = true;
var _didIteratorError = false;
var _iteratorError = undefined;

try {
  for (var _iterator = _getIterator(simples), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
    var s = _step.value;

    fs[s] = _bluebird2['default'].promisify(_fs3['default'][s]);
  }
} catch (err) {
  _didIteratorError = true;
  _iteratorError = err;
} finally {
  try {
    if (!_iteratorNormalCompletion && _iterator['return']) {
      _iterator['return']();
    }
  } finally {
    if (_didIteratorError) {
      throw _iteratorError;
    }
  }
}

exports['default'] = fs;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9mcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7bUJBQWdCLElBQUk7Ozs7c0JBQ0QsUUFBUTs7OztvQkFDWCxLQUFLOzs7O21CQUNMLEtBQUs7Ozs7d0JBQ1AsVUFBVTs7OztrQkFDVCxJQUFJOzs7O3FCQUNELE9BQU87Ozs7b0JBQ1IsTUFBTTs7OztBQUd2QixJQUFJLEVBQUUsR0FBRztBQUNQLFdBQVMsRUFBRSxtQkFBZ0IsSUFBSTs7Ozs7OzJDQUVyQixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUM7Ozs7Ozs7Ozs4Q0FFbkMsS0FBSzs7OzhDQUVQLElBQUk7Ozs7Ozs7R0FDWjtBQUNELFFBQU0sRUFBRSxnQkFBVSxJQUFJLEVBQUU7QUFBRSxXQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7R0FBRTtBQUN4RCxRQUFNLEVBQUUsc0JBQUUsU0FBUyxxQkFBUTtBQUMzQixPQUFLLEVBQUUsZUFBZ0IsT0FBTztRQUN4QixNQUFNOzs7OztBQUFOLGdCQUFNLEdBQUcsc0JBQUUsU0FBUyxDQUFDLGdCQUFJLEtBQUssQ0FBQzs7OzJDQUUzQixNQUFNLENBQUMsT0FBTyxDQUFDOzs7Ozs7Ozs7O2dCQUVqQixrQkFBTyxlQUFJLElBQUksS0FBSyxRQUFRLENBQUE7Ozs7Ozs7Ozs7OztHQUluQztBQUNELFVBQVEsRUFBRSxzQkFBRSxTQUFTLGtCQUFLO0FBQzFCLEtBQUcsRUFBRSxhQUFnQixRQUFROzs7OzsyQ0FDVixFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQzs7Ozs7Ozs7Ozs7R0FDdkM7QUFDRCxJQUFFLEVBQUUsc0JBQUUsU0FBUyxpQkFBSTtBQUNuQixPQUFLLEVBQUUsc0JBQUUsU0FBUyxvQkFBTztBQUN6QixNQUFJLEVBQUUsc0JBQUUsU0FBUyxtQkFBTTtDQUN4QixDQUFDOztBQUVGLElBQU0sT0FBTyxHQUFHLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFDbEQsT0FBTyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQ3pELFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQzs7Ozs7OztBQUVwQyxvQ0FBYyxPQUFPLDRHQUFFO1FBQWQsQ0FBQzs7QUFDUixNQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsc0JBQUUsU0FBUyxDQUFDLGdCQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7R0FDN0I7Ozs7Ozs7Ozs7Ozs7Ozs7cUJBRWMsRUFBRSIsImZpbGUiOiJsaWIvZnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2ZzIGZyb20gJ2ZzJztcbmltcG9ydCByaW1yYWYgZnJvbSAncmltcmFmJztcbmltcG9ydCBtZDUgZnJvbSAnbWQ1JztcbmltcG9ydCBuY3AgZnJvbSAnbmNwJztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBtdiBmcm9tICdtdic7XG5pbXBvcnQgd2hpY2ggZnJvbSAnd2hpY2gnO1xuaW1wb3J0IGdsb2IgZnJvbSAnZ2xvYic7XG5cblxubGV0IGZzID0ge1xuICBoYXNBY2Nlc3M6IGFzeW5jIGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuYWNjZXNzKHBhdGgsIGZzLkZfT0sgfCBmcy5SX09LKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIGV4aXN0czogZnVuY3Rpb24gKHBhdGgpIHsgcmV0dXJuIHRoaXMuaGFzQWNjZXNzKHBhdGgpOyB9LFxuICByaW1yYWY6IEIucHJvbWlzaWZ5KHJpbXJhZiksXG4gIG1rZGlyOiBhc3luYyBmdW5jdGlvbiAoZGlyTmFtZSkge1xuICAgIGxldCBfbWtkaXIgPSBCLnByb21pc2lmeShfZnMubWtkaXIpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBfbWtkaXIoZGlyTmFtZSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoZXJyICYmIGVyci5jb2RlICE9PSBcIkVFWElTVFwiKSB7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGNvcHlGaWxlOiBCLnByb21pc2lmeShuY3ApLFxuICBtZDU6IGFzeW5jIGZ1bmN0aW9uIChmaWxlUGF0aCkge1xuICAgIHJldHVybiBtZDUoYXdhaXQgZnMucmVhZEZpbGUoZmlsZVBhdGgpKTtcbiAgfSxcbiAgbXY6IEIucHJvbWlzaWZ5KG12KSxcbiAgd2hpY2g6IEIucHJvbWlzaWZ5KHdoaWNoKSxcbiAgZ2xvYjogQi5wcm9taXNpZnkoZ2xvYilcbn07XG5cbmNvbnN0IHNpbXBsZXMgPSBbJ29wZW4nLCAnY2xvc2UnLCAnYWNjZXNzJywgJ3JlYWRGaWxlJywgJ3dyaXRlRmlsZScsXG4gICAgICAgICAgICAgICAgICd3cml0ZScsICdyZWFkbGluaycsICdjaG1vZCcsICd1bmxpbmsnLCAncmVhZGRpcicsICdzdGF0JyxcbiAgICAgICAgICAgICAgICAgJ3JlbmFtZScsICdsc3RhdCddO1xuXG5mb3IgKGxldCBzIG9mIHNpbXBsZXMpIHtcbiAgZnNbc10gPSBCLnByb21pc2lmeShfZnNbc10pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmcztcbiJdfQ==